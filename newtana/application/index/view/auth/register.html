<!DOCTYPE html>
<html data-use-rem="750" lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"
          name="viewport">
    <meta content="telephone=no" name="format-detection">
    <meta content="email=no" name="format-detection">
    <meta content="0" http-equiv="expires">
    <link href="__HOME_CSS__/reset.css" rel="stylesheet">
    <link href="__HOME_CSS__/swiper.min.css" rel="stylesheet">
    <link href="__HOME_CSS__/lungustyle.css" rel="stylesheet">
    <link href="__HOME_CSS__/lungustyle2.css" rel="stylesheet">
    <link href="__LIBS__/layui/css/layui.css" rel="stylesheet">
    <title>{block name="title"}{/block}</title>
</head>
<style>
    .layui-nav {
        background-color: #ffffff;
    }

    .layui-nav li {
        height: 50px;
    }

    .layui-nav-item a {
        width: auto !important;
        line-height: 50px !important;
    }

    .layui-nav-item a img {
        width: 20px !important;
        margin: 0 !important;
        padding: 15px 5px !important;
    }

    .layui-nav-item a img.layui-nav-img {
        width: 50px !important;
        height: 50px !important;
        margin: 0 !important;
        padding: 0 !important;
    }

    .layui-nav-item a img.icon-order-box {
        width: 16px !important;
    }

    .deng li a:first-child {
        border-right: none !important;
    }

    .layui-nav-child dd a {
        float: unset !important;
        line-height: 30px !important;
    }

    /*.layui-nav-bar {
        background-color: #ff5722 !important;
    }*/
    .layui-this:after {
        background: none !important;
    }

    .layui-nav-item a .icon-bugcar {
        width: 20px;
    }

    /*.layui-nav-item a:hover{
        color: red;
    }*/
    .layui-nav-bar {
        display: none;
    }


    .layui-nav .layui-badge, .layui-nav .layui-badge-dot {
        position: absolute;
        top: 50%;
        margin: -18px 0 0;
        border-radius: 100%;
        background: #FF2222;
    }
</style>
<body class="{block name='body_css'}{/block}">


<!--register-->
<div class="loginbox regidter">
    <div class="title-box">
        <div class="heiselogobox"><img src="__HOME_IMG__/heiselogo.png"></div>
        <span class="clostxxx" onclick="location.href='/'"><img src="__HOME_IMG__/clostxxx.png"></span>
        <h4>新用户注册</h4>
    </div>
    <div class="regidter-content">
        <h3 class="yidong-title">新用户注册</h3>
        <div class="regidterbox regidter-left">
            <p>当您在注册时遇到任何问题<br>
                请及时联系客服解决<br>
                客服联系方式如下：<br></p>
            <p class="email-box"><span>客服邮箱</span> <a
                    href="mailto:service@tana-wheels.com">service@tana-wheels.com</a>
            </p>
            <p><span>客服电话</span> 13911681730</p>
        </div>

        <div class="regidter-right">
            <ul>
                <li>
                    <span class="lianxi-ren-box">用户账号</span>
                    <input id="nickname" name="username" placeholder="请输入用户账号" type="text">
                </li>

                <li>
                    <span class="lianxi-ren-box">用户类型</span>
                    <div class="customer-type">
                        <div class="qiye-yonghu">
                            <input class="radio" name="type" checked type="radio" value="0"><span
                                class="yonghu-txt">个体用户</span>
                        </div>
                        <div class="qiye-yonghu">
                            <input class="radio" name="type" type="radio" value="1"><span
                                class="yonghu-txt">企业用户</span>
                        </div>
                    </div>
                </li>
                <li>
                    <span class="lianxi-ren-box">个人或企业名称</span>
                    <input name="nickname" placeholder="请输入名称" type="text">
                </li>
                <li>
                    <span class="lianxi-ren-box">密码</span>
                    <input id="password" name="password" placeholder="请输入密码" type="password" />
                </li>
                <li>
                    <span class="lianxi-ren-box">确认密码</span>
                    <input id="oldPassword" name="oldPassword" placeholder="请输入确认密码" type="password">
                </li>
                <li>
                    <span class="lianxi-ren-box">手机</span>
                    <input class="telephone" name="telephone" placeholder="请输入手机号" type="text">
                    <p class="error" style="display: none;">请输入正确的手机号</p>
                </li>
                <li>
                    <span class="lianxi-ren-box">电子邮箱</span>
                    <input class="email" name="email" placeholder="请输入您的电子邮箱" type="text">
                </li>
                <li class="tuxing-ma">
                    <span class="lianxi-ren-box">图形码</span>
                    <input class="code" name="code" placeholder="请输入图形码" type="text" style="width: 120px;">
                    <img src="{:captcha_src()}" class="captcha" style="cursor: pointer;width: 110px;"
                         title="看不清，点击更换一张">
                </li>
                <li class="tuxing-ma">
                    <span class="lianxi-ren-box">短信验证码</span>
                    <input class="sms_code" name="sms_code" placeholder="请输入短信验证码" type="text">
                    <div class="verification-code ver_code">发送验证码</div>
                </li>

            </ul>
            <p class="agreement-box">注册即同意<a href="javascript:;" class="openPrivacy">《隐私政策》</a></p>
        </div>
    </div>

    <div class="submission-box">
        <button class="login-btn regidter-queding">提交</button>
    </div>
    <a class="go-login" href="/login.html">已有账号？立刻登录>></a>

</div>
<!--隐私协议-->
<div class="privacy" style="display: none;">
    <div class="yid-xieyi-overflow">
        <img src="__HOME_IMG__/yid-xieyi.svg">
        <button class="login-btn regidter-queding yingsi-btn closePrivacy">确定</button>
    </div>
</div>
<!--end 隐私协议-->
<script src="__HOME_JS__/swiper.min.js"></script>
<script src="__HOME_JS__/swiper.animate.min.js"></script>
<script src="__HOME_JS__/jquery-3.2.1.min.js"></script>
<script src="__LIBS__/layer/layer.js" type="text/javascript"></script>
<script src="__LIBS__/layui/layui.js" type="text/javascript"></script>
<script type="text/javascript">
    var regLayer
        ,privacyLayer;

    //隐私协议
    $('.openPrivacy').click(function () {
        privacyLayer = layer.open({
            type: 1,
            shade: 0.7,
            title: false,
            area: 'auto',
            closeBtn: 0,
            content: $('.privacy'),
            success: function () {
                $(':focus').blur();
            }
        });
    });

    $('.closePrivacy').click(function () {
        layer.close(privacyLayer);
    });

    //注册
    $('.regidter-queding').click(function () {
        var telephone = $.trim($(".telephone").val())
            , code = $(".code").val()
            , password = $('input[name="password"]').val()
            , oldPassword = $('input[name="oldPassword"]').val()
            , username = $('input[name="username"]').val()
            , sms_code = $('input[name="sms_code"]').val()
            , nickname = $('input[name="nickname"]').val()
            , type = $('input[name="type"][checked]').val()
            , email = $('input[name="email"]').val()
        if (result === false) {
            layer.msg("操作过于频繁,请在倒计时结束后再次发送！");
            return false;
        }
        if (username.length < 4 || username.length > 16) {
            layer.msg("用户账号的长度为4-16位！");
            return false;
        }
        if (password.length < 6 || password.length > 16) {
            layer.msg("登录密码的长度为6-16位！");
            return false;
        }
        if (telephone === "" || telephone == null) {
            layer.msg("手机号码不能为空");
            return false;
        }
        if (code == "") {
            layer.msg("图文验证码不能为空");
            return false;
        }
        if (nickname == "") {
            layer.msg("个人或企业名称不能为空");
            return false;
        }
        if (sms_code == "") {
            layer.msg("短信验证码不能为空");
            return false;
        }
        if (email == "") {
            layer.msg("邮箱地址不能为空");
            return false;
        }
        if (oldPassword == "") {
            layer.msg("确认密码不能为空");
            return false;
        }
        $.ajax({
            url: '/register.html',
            data: {
                telephone: telephone,
                code: code,
                password: password,
                oldPassword: oldPassword,
                username: username,
                sms_code: sms_code,
                nickname: nickname,
                type: type,
                email: email,
            },
            type: 'post',
            success: function (res) {
                if (res.code === 1) {
                    layer.msg('注册成功',function () {
                        location.reload()
                    });
                } else {
                    layer.msg(res.msg)
                }
            },
            error: function () {
                layer.msg('网络异常');
            }
        })
    });




    var result = true;

    $(".ver_code").click(function () {
        var telephone = $.trim($(".telephone").val())
            , time = 60
            , code = $(".code").val()
            , password = $('input[name="password"]').val()
            , username = $('input[name="username"]').val();

        if (result === false) {
            layer.msg("操作过于频繁,请在倒计时结束后再次发送！");
            return false;
        }
        if (username.length < 4 || username.length > 16) {
            layer.msg("用户账号的长度为4-16位！");
            return false;
        }
        if (password.length < 6 || password.length > 16) {
            layer.msg("登录密码的长度为6-16位！");
            return false;
        }
        if (telephone === "" || telephone == null) {
            layer.msg("手机号码不能为空");
            return false;
        }
        if (code === "" || code == null) {
            layer.msg("图文验证码不能为空");
            return false;
        }

        var index = layer.load(1, {
            shade: [0.1, '#fff'] //0.1透明度的白色背景
        });
        $.ajax({
            type: 'post',
            data: {username: username, password: password, telephone: telephone, scene: 8, nation_code: 86, code: code},
            url: "/index/sms/save",
            success: function (res) {
                layer.close(index);
                if (res.code === 1) {
                    if (time === 60) {
                        var time1 = setInterval(function () {
                            if (time === 0) {
                                $(".ver_code").html("重新发送");
                                $(".ver_code").removeAttr("disabled");
                                result = true;
                                time = 60;
                                clearInterval(time1);
                            } else {
                                $(".ver_code").attr("disabled", "true");
                                $(".ver_code").html("重新发送(" + time + ")");
                                result = false;
                                time--;
                            }
                        }, 1000);
                    }
                } else {
                    layer.msg(res.msg);
                    return false;
                }
            }
        })
    });

    //监听验证码更换
    $('.captcha').click(function () {
        $(this).attr('src', '{:captcha_src()}?t={:time()}');
    });
    (function (win) {
        var doc = win.document, html = doc.documentElement, option = html.getAttribute("data-use-rem");
        if (option === null) {
            return
        }
        var baseWidth = parseInt(option).toString() === "NaN" ? 640 : parseInt(option);
        var grids = baseWidth / 100;
        var clientWidth = html.clientWidth || 320;
        html.style.fontSize = clientWidth / grids + "px";
        var testDom = document.createElement("div");
        var testDomWidth = 0;
        var adjustRatio = 0;
        testDom.style.cssText = "height:0;width:1rem;";
        doc.body.appendChild(testDom);
        var calcTestDom = function () {
            testDomWidth = testDom.offsetWidth;
            if (testDomWidth !== Math.round(clientWidth / grids)) {
                adjustRatio = clientWidth / grids / testDomWidth;
                var reCalcRem = clientWidth * adjustRatio / grids;
                html.style.fontSize = reCalcRem + "px"
            } else {
                doc.body.removeChild(testDom)
            }
        };
        setTimeout(calcTestDom, 20);
        var reCalc = function () {
            var newCW = html.clientWidth;
            if (newCW === clientWidth) {
                return
            }
            clientWidth = newCW;
            html.style.fontSize = newCW * (adjustRatio ? adjustRatio : 1) / grids + "px"
        };
        if (!doc.addEventListener) {
            return
        }
        var resizeEvt = "orientationchange" in win ? "orientationchange" : "resize";
        win.addEventListener(resizeEvt, reCalc, false);
        doc.addEventListener("DOMContentLoaded", reCalc, false)
    })(window);
</script>
{block name="js"}

{/block}
</body>
</html>